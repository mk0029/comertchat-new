@tailwind base;
@tailwind components;
@tailwind utilities;
@layer components {
  .messages-wrapper .cometchat-message-list {
    background: var(--cometchat-background-color-03, var(--color-bg-tertiary));
    transition: background-color 0.2s ease;
    @apply dark:bg-theme-bg-tertiary;
  }

  .messages-wrapper .cometchat-list__body::-webkit-scrollbar,
  .messages-wrapper .cometchat-list__body::-webkit-scrollbar-thumb {
    @apply hidden;
  }

  .messages-wrapper .cometchat-header__info {
    @apply w-6 h-6 cursor-pointer;
    -webkit-mask: url("../../assets/infoIcon.svg") center center no-repeat;
    background: var(--cometchat-icon-color-primary, var(--color-text-primary));
    -webkit-mask-size: contain;
    transition: background-color 0.2s ease;
  }

  .messages-wrapper .message-composer-blocked {
    @apply flex w-full h-12 p-3 flex-col justify-center items-center gap-1 flex-shrink-0;
    background: var(--cometchat-background-color-04, var(--color-bg-secondary));
    transition: background-color 0.2s ease;
  }

  .messages-wrapper .message-composer-blocked__text {
    color: var(--cometchat-text-color-secondary, var(--color-text-secondary));
    font: var(--cometchat-font-body-regular);
    transition: color 0.2s ease;
  }

  .messages-wrapper .message-composer-blocked__text > a {
    @apply underline cursor-pointer;
    text-decoration-color: var(--cometchat-primary-color, var(--color-accent));
    color: var(--cometchat-primary-color, var(--color-accent));
    transition: color 0.2s ease;
  }

  .messages-wrapper .cometchat-header__info:hover {
    background: var(--cometchat-icon-color-highlight, var(--color-accent));
  }

  .messages-wrapper .cometchat-message-header__menu {
    @apply gap-4 dark:bg-theme-bg-secondary;
  }

  .messages-wrapper .cometchat-message-composer {
    @apply m-2 w-auto h-auto;
  }

  .messages-wrapper .cometchat-message-list__shimmer {
    background: var(--cometchat-background-color-03, var(--color-bg-tertiary));
    transition: background-color 0.2s ease;
  }

  .cometchat-header-wrapper {
    @apply h-16 w-full flex-auto flex-shrink-0;
  }

  .cometchat-message-list-wrapper {
    @apply w-full flex-grow overflow-auto;
    height: calc(100% - 120px); /* Account for header and composer heights */
  }

  .cometchat-message-list-wrapper > .cometchat {
    @apply h-full overflow-auto;
  }

  .cometchat-composer-wrapper {
    @apply w-full flex-shrink-0;
    bottom: 0;
    position: relative;
  }

  .cometchat-messages-wrapper {
    @apply w-full h-full flex flex-col items-center justify-between overflow-hidden;
    background: var(--cometchat-background-color-03, var(--color-bg-tertiary));
    transition: background-color 0.2s ease;
    /* Use custom viewport height variables */
    height: 100vh; /* Fallback */
    height: calc(var(--vh, 1vh) * 100); /* Use our custom variable */
  }

  .messages-wrapper .cometchat-list__header {
    @apply border-r-0;
  }

  @media (max-width: 768px) {
    .cometchat-messages-wrapper {
      @apply w-screen fixed top-0 left-0 z-[3];
      height: calc(var(--vh, 1vh) * 100);
      position: fixed;
      display: flex;
      flex-direction: column;
    }
    
    /* Fixed height for header */
    .cometchat-header-wrapper {
      position: sticky;
      top: 0;
      z-index: 10;
    }
    
    /* Message list should take available space */
    .cometchat-message-list-wrapper {
      flex: 1;
      overflow-y: auto;
      position: relative;
    }
    
    /* Composer stays at bottom */
    .cometchat-composer-wrapper {
      position: sticky;
      bottom: 0;
      z-index: 10;
    }
  }
}
